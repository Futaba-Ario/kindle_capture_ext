# Kindle Capture Extension

Cloud Reader上の本を自動でページ送りしながらキャプチャし、PDFとして保存する Chrome 拡張機能です。

## 機能
- **自動ページ送り**: 指定したページ数分、自動で右（または左）へページをめくります。
- **スクリーンショット撮影**: 各ページを高解像度でキャプチャします。
- **PDF生成**: 取得した画像を結合し、1つのPDFファイルとしてダウンロードします。
- **オフスクリーン処理**: 画像処理をバックグラウンド（Offscreen）で行うため、ブラウザ操作への影響を抑えます。

## インストール方法
1. このフォルダーをリポジトリとしてクローンまたはダウンロードします。
   - 必要なファイル: `manifest.json`, `src/`, `lib/`, `icons/` 等
2. Chrome ブラウザで `chrome://extensions` を開きます。
3. 右上の **デベロッパーモード** をオンにします。
4. **「パッケージ化されていない拡張機能を読み込む」 (Load unpacked)** をクリックします。
5. この拡張機能のルートディレクトリ（`kindle_capture_ext`）を選択します。

## 使い方
1. [Kindle Cloud Reader](https://read.amazon.co.jp) にアクセスし、本を開きます。
2. ブラウザ右上の拡張機能アイコンをクリックしてポップアップを開きます。
3. **設定**:
   - **ページ数**: キャプチャしたいページ数を入力します（例: 50）。
   - **待機(ms)**: ページめくり後の待機時間です（デフォルト 1500ms）。回線速度や描画速度に合わせて調整してください。
   - **分割(頁)**: 指定したページ数ごとにPDFファイルを分割保存します（例: 50ページごとに保存）。0の場合は分割しません。メモリ不足回避や管理のしやすさに役立ちます。
4. **「開始 (PDF)」** ボタンをクリックします。
   - 自動的にページがめくられ、撮影が進みます。
   - 処理中はポップアップにステータスが表示されます。
5. 完了すると `kindle_book_YYYY-MM-DD...pdf` が自動的にダウンロードされます。
6. 途中で止めたい場合は **「停止」** ボタンを押してください（現在のページまでで処理を終了し、そこまでのPDFを生成します）。

## 注意事項
- **著作権**: 私的利用の範囲内でのみ使用してください。
- **DRM**: 画面が黒くなる場合はハードウェアアクセラレーションを無効にするなどのブラウザ設定が必要な場合がありますが、本ツールはDRM回避を行いません。
- **メモリ**: 大量（数百ページ以上）のページを一気にPDF化すると、ブラウザのメモリ制限によりクラッシュする可能性があります。50〜100ページ程度に分割しての利用を推奨します。
